#!/bin/bash
# Install dotfiles and programs that are part of my [workflow](.workflow)

set -e
[[ "$DOTFILES" ]] || export DOTFILES=$(pwd)

_theme(){
    wget https://github.com/Mrcuve0/Aritim-Dark/archive/master.zip
    unzip master.zip
    readonly themes_dir="$HOME"/.themes
    mkdir -p "$themes_dir"
    mv Aritim-Dark-master/GTK "$themes_dir"/ayu
    rm -rf Aritim-Dark-master master.zip
}

_make_repo(){
    mkdir -p ~/repos
    name="$(basename "$1")"
    echo -e "\033[35mInstalling $name...\033[33m"
    git clone "$1" ~/repos/"$name"
    make install -C ~/repos/"$name"
    echo -e "\033[0m"
}

read -r -p "Type of install [(F)ULL | (h)eadless]: "
case "$REPLY" in
    FULL|F|"")
        bash nail
        _theme
        FULL="yes"
        ;;
    headless|h)
        bash nail --headless
        ;;
esac

###### Install standard workflow #####
sh storeTools

source .workflow

yes | sudo pacman -S --needed  "${essential_pacman[@]}"

for repo in "${essential_repos[@]}"
do
    _make_repo "$repo"
done

if [[ $FULL ]]
then
    for repo in "${full_repos[@]}"
    do
        _make_repo "$repo"
    done
fi
